<post title="Running SLIME on Vagrant">
  <p>For some reason I couldn't connect from my host Emacs to my guest Lisp
  process using Vagrant's port forwarding, so until I figure that out, you have
  to do it as specified in the <l id="manual">manual</l>. I did, however, figure
  out how to do what's specified with a single script and without opening two
  terminals. The code is exactly what Lovecraft was talking about, but it
  works:</p>

  <code>
    echo "Starting remote Swank..."
    sshpass -p vagrant ssh vagrant@$IP_ADDRESS -o StrictHostKeyChecking=no \
     'nohup sbcl --noinform --eval "(ql:quickload :swank)" \
                      --eval "(swank:create-server :port 4005 :dont-close t)" \
                      --eval "(loop)" > /dev/null 2>&1 &'
    echo "Opening SSH tunnel..."
    sleep 3
    sshpass -p vagrant ssh -L 4099:127.0.0.1:4005 vagrant@$IP_ADDRESS \
      -o StrictHostKeyChecking=no
  </code>

  <p>Now all you have to do to connect is <ic>M-x slime-connect RET
  4099</ic>.

  Hopefully I can get this down to something that doesn't make me lose my will
  to live every time I look at it.</p>
</post>
